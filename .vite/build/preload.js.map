{"version":3,"file":"preload.js","sources":["../../electron/preload.ts"],"sourcesContent":["/**\n * Mimiverse IDE - Electron Preload Script\n * Secure bridge between renderer and main process\n */\n\nimport { contextBridge, ipcRenderer } from 'electron';\n\n// ==================== EXPOSED API ====================\n\n/**\n * API exposed to the renderer process via window.electronAPI\n */\nconst electronAPI = {\n    // ==================== FILE OPERATIONS ====================\n\n    /**\n     * Read file contents\n     */\n    readFile: (filePath: string): Promise<{ success: boolean; content?: string; error?: string }> => {\n        return ipcRenderer.invoke('read-file', filePath);\n    },\n\n    /**\n     * Write content to file\n     */\n    writeFile: (filePath: string, content: string): Promise<{ success: boolean; error?: string }> => {\n        return ipcRenderer.invoke('write-file', filePath, content);\n    },\n\n    /**\n     * List directory contents\n     */\n    listDirectory: (dirPath: string): Promise<{\n        success: boolean;\n        files?: Array<{ name: string; isDirectory: boolean; path: string }>;\n        error?: string\n    }> => {\n        return ipcRenderer.invoke('list-directory', dirPath);\n    },\n\n    // ==================== DIALOGS ====================\n\n    /**\n     * Show file/folder open dialog\n     */\n    showOpenDialog: (options: {\n        title?: string;\n        defaultPath?: string;\n        filters?: Array<{ name: string; extensions: string[] }>;\n        properties?: Array<'openFile' | 'openDirectory' | 'multiSelections' | 'createDirectory'>;\n    }): Promise<{ canceled: boolean; filePaths: string[] }> => {\n        return ipcRenderer.invoke('show-open-dialog', options);\n    },\n\n    /**\n     * Show file save dialog\n     */\n    showSaveDialog: (options: {\n        title?: string;\n        defaultPath?: string;\n        filters?: Array<{ name: string; extensions: string[] }>;\n    }): Promise<{ canceled: boolean; filePath?: string }> => {\n        return ipcRenderer.invoke('show-save-dialog', options);\n    },\n\n    // ==================== SHELL OPERATIONS ====================\n\n    /**\n     * Open URL in default browser\n     */\n    openExternal: (url: string): Promise<void> => {\n        return ipcRenderer.invoke('open-external', url);\n    },\n\n    /**\n     * Show file in system file manager\n     */\n    showItemInFolder: (fullPath: string): Promise<void> => {\n        return ipcRenderer.invoke('show-item-in-folder', fullPath);\n    },\n\n    // ==================== APP INFO ====================\n\n    /**\n     * Get application version\n     */\n    getAppVersion: (): Promise<string> => {\n        return ipcRenderer.invoke('get-app-version');\n    },\n\n    /**\n     * Get platform (darwin, win32, linux)\n     */\n    getPlatform: (): Promise<string> => {\n        return ipcRenderer.invoke('get-platform');\n    },\n\n    // ==================== EVENT LISTENERS ====================\n\n    /**\n     * Listen for folder opened event (from menu)\n     */\n    onFolderOpened: (callback: (folderPath: string) => void) => {\n        ipcRenderer.on('folder-opened', (_event, path) => callback(path));\n        return () => ipcRenderer.removeAllListeners('folder-opened');\n    },\n\n    /**\n     * Listen for save file event (from menu)\n     */\n    onSaveFile: (callback: () => void) => {\n        ipcRenderer.on('save-file', () => callback());\n        return () => ipcRenderer.removeAllListeners('save-file');\n    },\n\n    /**\n     * Listen for save all files event (from menu)\n     */\n    onSaveAllFiles: (callback: () => void) => {\n        ipcRenderer.on('save-all-files', () => callback());\n        return () => ipcRenderer.removeAllListeners('save-all-files');\n    },\n\n    /**\n     * Listen for toggle AI chat event (from menu)\n     */\n    onToggleAIChat: (callback: () => void) => {\n        ipcRenderer.on('toggle-ai-chat', () => callback());\n        return () => ipcRenderer.removeAllListeners('toggle-ai-chat');\n    },\n\n    /**\n     * Listen for start build event (from menu)\n     */\n    onStartBuild: (callback: () => void) => {\n        ipcRenderer.on('start-build', () => callback());\n        return () => ipcRenderer.removeAllListeners('start-build');\n    },\n\n    /**\n     * Listen for run tests event (from menu)\n     */\n    onRunTests: (callback: () => void) => {\n        ipcRenderer.on('run-tests', () => callback());\n        return () => ipcRenderer.removeAllListeners('run-tests');\n    },\n\n    /**\n     * Listen for auto-fix event (from menu)\n     */\n    onAutoFix: (callback: () => void) => {\n        ipcRenderer.on('auto-fix', () => callback());\n        return () => ipcRenderer.removeAllListeners('auto-fix');\n    },\n};\n\n// ==================== EXPOSE TO RENDERER ====================\n\ncontextBridge.exposeInMainWorld('electronAPI', electronAPI);\n\n// Type declarations for the renderer process\ndeclare global {\n    interface Window {\n        electronAPI: typeof electronAPI;\n    }\n}\n\nconsole.log('[Preload] Mimiverse API exposed to renderer');\n"],"names":[],"mappings":";AAYA,MAAM,cAAc;AAAA;AAAA;AAAA;AAAA;AAAA,EAMhB,UAAU,CAAC,aAAsF;AAC7F,WAAO,YAAY,OAAO,aAAa,QAAQ;AAAA,EACnD;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,CAAC,UAAkB,YAAmE;AAC7F,WAAO,YAAY,OAAO,cAAc,UAAU,OAAO;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA,EAKA,eAAe,CAAC,YAIV;AACF,WAAO,YAAY,OAAO,kBAAkB,OAAO;AAAA,EACvD;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,gBAAgB,CAAC,YAK0C;AACvD,WAAO,YAAY,OAAO,oBAAoB,OAAO;AAAA,EACzD;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,CAAC,YAIwC;AACrD,WAAO,YAAY,OAAO,oBAAoB,OAAO;AAAA,EACzD;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,cAAc,CAAC,QAA+B;AAC1C,WAAO,YAAY,OAAO,iBAAiB,GAAG;AAAA,EAClD;AAAA;AAAA;AAAA;AAAA,EAKA,kBAAkB,CAAC,aAAoC;AACnD,WAAO,YAAY,OAAO,uBAAuB,QAAQ;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,eAAe,MAAuB;AAClC,WAAO,YAAY,OAAO,iBAAiB;AAAA,EAC/C;AAAA;AAAA;AAAA;AAAA,EAKA,aAAa,MAAuB;AAChC,WAAO,YAAY,OAAO,cAAc;AAAA,EAC5C;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,gBAAgB,CAAC,aAA2C;AACxD,gBAAY,GAAG,iBAAiB,CAAC,QAAQ,SAAS,SAAS,IAAI,CAAC;AAChE,WAAO,MAAM,YAAY,mBAAmB,eAAe;AAAA,EAC/D;AAAA;AAAA;AAAA;AAAA,EAKA,YAAY,CAAC,aAAyB;AAClC,gBAAY,GAAG,aAAa,MAAM,SAAA,CAAU;AAC5C,WAAO,MAAM,YAAY,mBAAmB,WAAW;AAAA,EAC3D;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,CAAC,aAAyB;AACtC,gBAAY,GAAG,kBAAkB,MAAM,SAAA,CAAU;AACjD,WAAO,MAAM,YAAY,mBAAmB,gBAAgB;AAAA,EAChE;AAAA;AAAA;AAAA;AAAA,EAKA,gBAAgB,CAAC,aAAyB;AACtC,gBAAY,GAAG,kBAAkB,MAAM,SAAA,CAAU;AACjD,WAAO,MAAM,YAAY,mBAAmB,gBAAgB;AAAA,EAChE;AAAA;AAAA;AAAA;AAAA,EAKA,cAAc,CAAC,aAAyB;AACpC,gBAAY,GAAG,eAAe,MAAM,SAAA,CAAU;AAC9C,WAAO,MAAM,YAAY,mBAAmB,aAAa;AAAA,EAC7D;AAAA;AAAA;AAAA;AAAA,EAKA,YAAY,CAAC,aAAyB;AAClC,gBAAY,GAAG,aAAa,MAAM,SAAA,CAAU;AAC5C,WAAO,MAAM,YAAY,mBAAmB,WAAW;AAAA,EAC3D;AAAA;AAAA;AAAA;AAAA,EAKA,WAAW,CAAC,aAAyB;AACjC,gBAAY,GAAG,YAAY,MAAM,SAAA,CAAU;AAC3C,WAAO,MAAM,YAAY,mBAAmB,UAAU;AAAA,EAC1D;AACJ;AAIA,cAAc,kBAAkB,eAAe,WAAW;AAS1D,QAAQ,IAAI,6CAA6C;"}